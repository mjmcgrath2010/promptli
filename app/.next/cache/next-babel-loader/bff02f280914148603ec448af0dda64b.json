{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Head from 'next/head';\nimport Router from 'next/router';\nimport { connect } from 'react-redux';\nimport { loginActions } from '../actions/index';\nimport Cookies from 'js-cookie';\nimport Nav from '../components/nav';\nimport Form from '../components/common/Form';\nimport { withTranslation } from '../lib/i18n';\n\nclass Login extends React.Component {\n  static getInitialProps() {\n    const token = Cookies.get('token');\n    return {\n      loggedIn: !!token,\n      namespacesRequired: ['login']\n    };\n  }\n\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"forgotPassword\", e => {\n      e && e.preventDefault();\n      Router.push('/forgot-password');\n    });\n\n    this.state = {\n      email: '',\n      password: ''\n    };\n    this.onChange = this.onChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.getFormFields = this.getFormFields.bind(this);\n    this.createAccount = this.createAccount.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.checkAuth();\n  }\n\n  onChange({\n    target: {\n      value,\n      name\n    }\n  }) {\n    this.setState({\n      [name]: value\n    });\n  }\n\n  getFormFields() {\n    return [{\n      name: 'email',\n      label: 'Email',\n      value: this.state.email,\n      type: 'email'\n    }, {\n      name: 'password',\n      label: 'Password',\n      value: this.state.password,\n      type: 'password'\n    }];\n  }\n\n  createAccount() {\n    Router.push('/create-account');\n  }\n\n  async onSubmit(e) {\n    e && e.preventDefault();\n    this.props.loginRequest(this.state);\n  }\n\n  render() {\n    const {\n      t\n    } = this.props;\n    return __jsx(\"div\", {\n      className: \"jsx-2085888330\"\n    }, __jsx(Head, null, __jsx(\"title\", {\n      className: \"jsx-2085888330\"\n    }, \"Login\")), __jsx(Nav, null), __jsx(\"img\", {\n      style: {\n        margin: '8em auto 4em',\n        width: '225px',\n        display: 'block',\n        position: 'relative'\n      },\n      alt: \"logo\",\n      src: \"../static/logos/promptli-color.png\",\n      className: \"jsx-2085888330\"\n    }), __jsx(Form, {\n      onSubmit: this.onSubmit,\n      submitBtnText: \"Login\",\n      fields: this.getFormFields(),\n      onChange: this.onChange,\n      title: t('title')\n    }), __jsx(\"div\", {\n      className: \"jsx-2085888330\"\n    }, __jsx(\"p\", {\n      style: {\n        textAlign: 'center',\n        width: '100%'\n      },\n      className: \"jsx-2085888330\"\n    }, this.props.t('noAccount'), ' ', __jsx(\"a\", {\n      style: {\n        cursor: 'pointer',\n        color: '#2a45ff'\n      },\n      role: \"button\",\n      onClick: this.createAccount,\n      className: \"jsx-2085888330\"\n    }, t('createAccount')), ' '), __jsx(\"p\", {\n      style: {\n        textAlign: 'center',\n        width: '100%'\n      },\n      className: \"jsx-2085888330\"\n    }, \"Forgot Password?\", ' ', __jsx(\"a\", {\n      style: {\n        cursor: 'pointer',\n        color: '#2a45ff'\n      },\n      role: \"button\",\n      onClick: this.forgotPassword,\n      className: \"jsx-2085888330\"\n    }, \"Click here to reset.\"), ' ')), __jsx(_JSXStyle, {\n      id: \"2085888330\"\n    }, []));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    token: state.auth\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    loginRequest: payload => {\n      dispatch(loginActions.makeLoginRequest(payload));\n    },\n    checkAuth: () => dispatch(loginActions.checkAuthRequest())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withTranslation('login')(Login));","map":null,"metadata":{},"sourceType":"module"}